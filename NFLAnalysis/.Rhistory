library(taRifx)
library(tidyverse)
passing <- read.csv(file = "~/Documents/NFLAnalysis/2018_adv_passing_stats.csv", header = TRUE, sep = ",") %>% rename(DropPct = Drop., BadPct = Bad.)
#Let's exclude records for non QBs
passing_filt <- passing %>% filter(Pos == "QB" | Pos == "qb")
#Generate correleation matrix
statscorr <- data.frame(cor(passing_filt[,unlist(lapply(passing_filt, is.numeric))]))
passing_filt <- japply(passing_filt, which(sapply(passing_filt, class)=="integer"), as.numeric )
passing_filt %>%
ggplot(passing_filt, aes(x=passing_filt$DropPct, y=passing_filt$Hrry)) +
geom_point()
passing_filt %>%
ggplot(passing_filt, aes(x=passing_filt$DropPct, y=passing_filt$Hrry))
passing_filt %>%
ggplot(passing_filt, mapping = aes(x=passing_filt$DropPct, y=passing_filt$Hrry)) +
geom_point()
passing_filt %>%
ggplot(passing_filt, mapping = aes(x=passing_filt$Hrry, y=passing_filt$DropPct)) +
geom_point()
passing_filt %>% filter(DropPct > 15)
View(passing_filt)
m20ratings <- read.csv(file = "~/Documents/NFLAnalysis/M20PlayerRatingsJul18.csv", header = TRUE, sep = ",")
View(m20ratings)
ratings_filt <- m20ratings %>% filter(position == "QB")
View(ratings_filt)
m20ratings <- read.csv(file = "~/Documents/NFLAnalysis/M20PlayerRatingsJul18.csv", header = TRUE, sep = ",") %>% rename(Pos = position)
ratings_filt <- m20ratings %>% filter(Pos == "QB")
View(ratings_filt)
str(ratings_filt)
m20ratings <- read.csv(file = "~/Documents/NFLAnalysis/M20PlayerRatingsJul18.csv", header = TRUE, sep = ",") %>% rename(Pos = position) %>%
select(Name, Team, Pos, ovr.rating, awareness.rating, throw.power.rating, strength.rating, acceleration.rating, injury.rating,
throw.accuracy.short.rating, play.recognition.rating, agility.rating)
sub("rating", "", names(m20ratings)[-1], fixed = TRUE)
sub(".rating", "", names(m20ratings)[-1], fixed = TRUE)
#Clean up col names in ratings df
sub(".rating", "", names(m20ratings)[-1], fixed = TRUE)
View(m20ratings)
#Clean up col names in ratings df
m20ratings <- sub(".rating", "", names(m20ratings)[-1], fixed = TRUE)
madden_ratings <- read.csv(file = "~/Documents/NFLAnalysis/M20PlayerRatingsJul18.csv", header = TRUE, sep = ",") %>% rename(Pos = position) %>%
select(Name, Team, Pos, ovr.rating, awareness.rating, throw.power.rating, strength.rating, acceleration.rating, injury.rating,
throw.accuracy.short.rating, play.recognition.rating, agility.rating)
#Clean up col names in ratings df
cleancols <- sub(".rating", "", names(m20ratings)[-1], fixed = TRUE)
#Clean up col names in ratings df
cleancols <- sub(".rating", "", names(madden_ratings)[-1], fixed = TRUE)
View(madden_ratings)
#Clean up col names in ratings df
cleancols <- sub(".rating", "", names(madden_ratings)[-1], fixed = TRUE)
names(madden_ratings) <- cleancols
View(madden_ratings)
#Clean up col names in ratings df
cleancols <- sub(".rating", "", names(madden_ratings), fixed = TRUE)
names(madden_ratings) <- cleancols
View(madden_ratings)
passing <- read.csv(file = "~/Documents/NFLAnalysis/2018_adv_passing_stats.csv", header = TRUE, sep = ",") %>% rename(DropPct = Drop., BadPct = Bad.)
madden_ratings <- read.csv(file = "~/Documents/NFLAnalysis/M20PlayerRatingsJul18.csv", header = TRUE, sep = ",") %>% rename(Pos = position)
#Clean up col names in ratings df
cleancols <- sub(".rating", "", names(madden_ratings), fixed = TRUE)
cleancols
names(madden_ratings) <- cleancols
View(madden_ratings)
madden_ratings_select <- madden_ratings %>%
select(Name, Team, Pos, ovr, awareness, throw.power, strength, acceleration, injury,
throw.accuracy.short, play.recognition, agility)
View(madden_ratings_select)
#Let's exclude records for non QBs
passing_filt <- passing %>% filter(Pos == "QB" | Pos == "qb")
ratings_filt <- m20ratings %>% filter(Pos == "QB")
#Select ratings of interest pertinent to QBs
madden_ratings_select <- madden_ratings %>%
select(Name, Team, Pos, ovr, awareness, throw.power, strength, acceleration, injury,
throw.accuracy.short, play.recognition, agility)
#Let's exclude records for non QBs
passing_filt <- passing %>% filter(Pos == "QB" | Pos == "qb")
ratings_filt <- madden_ratings_select %>% filter(Pos == "QB")
View(passing_filt)
View(ratings_filt)
passing <- read.csv(file = "~/Documents/NFLAnalysis/2018_adv_passing_stats.csv", header = TRUE, sep = ",") %>%
rename(DropPct = Drop., BadPct = Bad., Name = Player, Team = Team)
passing <- read.csv(file = "~/Documents/NFLAnalysis/2018_adv_passing_stats.csv", header = TRUE, sep = ",") %>%
rename(DropPct = Drop., BadPct = Bad., Name = Player, Team = Tm)
passing <- read.csv(file = "~/Documents/NFLAnalysis/2018_adv_passing_stats.csv", header = TRUE, sep = ",") %>%
rename(DropPct = Drop., BadPct = Bad., Name = Player, Team = Tm)
)
madden_ratings <- read.csv(file = "~/Documents/NFLAnalysis/M20PlayerRatingsJul18.csv", header = TRUE, sep = ",") %>% rename(Pos = position)
#Clean up col names in ratings df
cleancols <- sub(".rating", "", names(madden_ratings), fixed = TRUE)
names(madden_ratings) <- cleancols
#Select ratings of interest pertinent to QBs
madden_ratings_select <- madden_ratings %>%
select(Name, Team, Pos, ovr, awareness, throw.power, strength, acceleration, injury,
throw.accuracy.short, play.recognition, agility)
#Let's exclude records for non QBs
passing_filt <- passing %>% filter(Pos == "QB" | Pos == "qb")
ratings_filt <- madden_ratings_select %>% filter(Pos == "QB")
str_replace_all(passing_filt$Name, "[^[:alnum:]]", "")
str_replace_all(passing_filt$Name, "[^[:alnum:]]", " ")
passing <- passing %>% str_replace_all(passing_filt$Name, "[^[:alnum:]]", " ")
passing <- passing %>% str_replace_all(., "[^[:alnum:]]", " ")
passing <- read.csv(file = "~/Documents/NFLAnalysis/2018_adv_passing_stats.csv", header = TRUE, sep = ",") %>%
rename(DropPct = Drop., BadPct = Bad., Name = Player, Team = Tm)
passing <- passing %>% str_replace_all(.$Name, "[^[:alnum:]]", " ")
madden_ratings$Name <- str_replace_all(madden_ratings$Name, "[^[:alnum:]]", " ")
View(madden_ratings)
madden_ratings_select <- madden_ratings %>%
select(Name, Team, Pos, ovr, awareness, throw.power, strength, acceleration, injury,
throw.accuracy.short, play.recognition, agility)
#Let's exclude records for non QBs
passing_filt <- passing %>% filter(Pos == "QB" | Pos == "qb")
ratings_filt <- madden_ratings_select %>% filter(Pos == "QB")
View(passing_filt)
passing$Name <- str_replace_all(passing$Name, "[^[:alnum:]]", " ")
View(passing)
madden_ratings$Name <- str_replace_all(madden_ratings$Name, "[^[:alnum:]]", " ")
passing$Name <- str_replace_all(passing$Name, "[^[:alnum:]]", " ")
#Select ratings of interest pertinent to QBs
madden_ratings_select <- madden_ratings %>%
select(Name, Team, Pos, ovr, awareness, throw.power, strength, acceleration, injury,
throw.accuracy.short, play.recognition, agility)
#Let's exclude records for non QBs
passing_filt <- passing %>% filter(Pos == "QB" | Pos == "qb")
ratings_filt <- madden_ratings_select %>% filter(Pos == "QB")
joined <- left_join(passing_filt, ratings_filt, by = Name)
joined <- left_join(passing_filt, ratings_filt, by = "Name")
View(joined)
joined <- passing_filt %>% inner_join(ratings_filt, by )
joined <- inner_join(passing_filt, ratings_filt, by = "Name")
View(joined)
joined <- inner_join(passing_filt, ratings_filt, by = "Name", "Team", "Pos")
joined <- inner_join(passing_filt, ratings_filt, by = c("Name", "Team", "Pos"))
View(joined)
joined <- inner_join(passing_filt, ratings_filt, by = "Name")
joined <- inner_join(passing_filt, ratings_filt, by = "Name")
#Left join the ratings data to stats for 2019 QBs. Drop the duplicate col.
joined <- inner_join(passing_filt, ratings_filt, by = "Name") %>% select(.,-c(Team.y,Pos.y)) %>% rename(.,Team = Team.x, Pos = Pos.x)
View(joined)
#Generate correleation matrix
statscorr <- data.frame(cor(joined[,unlist(lapply(passing_filt, is.numeric))]))
View(statscorr)
#Generate correleation matrix
statscorr <- data.frame(cor(joined[,unlist(lapply(joined, is.numeric))]))
View(statscorr)
statscorr %>% select(ovr)
joined %>%
ggplot(joined, mapping = aes(x=Age, y=throw.power)) +
geom_point()
joined %>%
ggplot(joined, mapping = aes(x=Age, y=injury)) +
geom_point()
View(statscorr)
joined %>% filter(Age >35)
View(joined)
joined <- right_join(passing_filt, ratings_filt, by = "Name") %>% select(.,-c(Team.y,Pos.y)) %>% rename(.,Team = Team.x, Pos = Pos.x)
joined <- left_join(passing_filt, ratings_filt, by = "Name") %>% select(.,-c(Team.y,Pos.y)) %>% rename(.,Team = Team.x, Pos = Pos.x)
View(joined)
joined %>%
ggplot(joined, mapping = aes(x=Age, y=injury)) +
geom_point()
install.packages("fuzzyjoin")
install.packages("fuzzyjoin")
library(fuzzyjoin)
library(tidyverse)
library("fuzzyjoin", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
devtools::install_github("dgrtwo/fuzzyjoin")
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
library(fuzzyjoin)
